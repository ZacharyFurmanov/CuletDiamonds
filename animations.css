/* Global animation and loading styles */

/* Sitewide subtle blue â†’ gold gradient background */
html.site-bg--blue-gold,
body.site-bg--blue-gold {
  background:
    linear-gradient(120deg, rgba(15,46,110,0.40) 0%, rgba(176,141,87,0.40) 100%),
    radial-gradient(800px 600px at 15% -10%, rgba(176,141,87,0.65), rgba(176,141,87,0) 60%),
    radial-gradient(900px 700px at 85% 110%, rgba(15,46,110,0.60), rgba(15,46,110,0) 60%),
    linear-gradient(180deg, #fafafa 0%, #ffffff 40%, #f6f6f6 100%);
  background-attachment: fixed;
}

/* Optional dark blue background variant */
body.site-bg--blue-black {
  background:
    radial-gradient(900px 700px at 85% 120%, rgba(15, 46, 110, 0.16), rgba(15, 46, 110, 0) 60%),
    linear-gradient(180deg, #0b0e16 0%, #0a0a0a 100%);
  background-attachment: fixed;
}

/* Placeholder block */
.ph {
  position: relative;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: repeating-linear-gradient(45deg, #f3f4f6, #f3f4f6 10px, #ececec 10px, #ececec 20px);
  box-shadow: var(--shadow);
}
.ph--empty { background: transparent !important; border-style: dashed; }
.ph--landscape { aspect-ratio: 16/9; }
.ph--portrait { aspect-ratio: 3/4; }
.ph--square { aspect-ratio: 1/1; }

/* Media fades in when loaded */
.card__img, .tile__img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  opacity: 0;
  transition: opacity .28s ease-in-out;
}
.card__img:not([src]), .tile__img:not([src]) { visibility: hidden; }
.ph.is-loaded .card__img, .tile__media.is-loaded .tile__img { opacity: 1; }

/* Skeleton shimmer loader */
/* Base skeleton placeholder with neutral shimmer (for text blocks, pills) */
.skeleton {
  position: relative;
  overflow: hidden;
  background-color: #f3f3f3;
  border-radius: var(--radius);
}
.skeleton::after {
  content: "";
  position: absolute;
  top: 0;
  left: -60%;
  height: 100%;
  width: 60%;
  background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.65) 50%, rgba(255,255,255,0) 100%);
  animation: shimmer-slide 1.25s infinite;
  will-change: transform, left;
  pointer-events: none;
}
@keyframes shimmer-slide {
  100% { left: 100%; }
}

/* Gold shimmer bar loader for image rectangles */
.ph.skeleton, .tile__media.skeleton {
  position: relative;
  background: #f3f3f3;
  overflow: hidden;
}
.ph.skeleton::after, .tile__media.skeleton::after {
  content: "";
  position: absolute;
  top: 0; left: -60%;
  width: 60%; height: 100%;
  background: linear-gradient(90deg, rgba(176,141,87,0.08) 0%, rgba(176,141,87,0.32) 50%, rgba(176,141,87,0.08) 100%);
  animation: shimmer-bar-gold 1.3s infinite;
  border-radius: inherit;
  z-index: 2;
  pointer-events: none;
  will-change: transform, left;
}
/* Ensure visibility when using explicit empty placeholder */
.ph.ph--empty.skeleton { background: #f7f7f8 !important; }
@keyframes shimmer-bar-gold {
  100% { left: 100%; }
}

/* Generic golden shimmer for Firebase loading */
.firebase-loading {
  position: relative;
  overflow: hidden;
}
.firebase-loading::after {
  content: "";
  position: absolute;
  top: 0; left: -60%;
  width: 60%; height: 100%;
  background: linear-gradient(90deg, rgba(176,141,87,0.08) 0%, rgba(176,141,87,0.32) 50%, rgba(176,141,87,0.08) 100%);
  animation: shimmer-bar-gold 1.3s infinite;
  border-radius: inherit;
  pointer-events: none;
}

/* Safety: if a node is both loaded and still has skeleton class, hide the overlay */
.is-loaded.skeleton::after { content: none; }

/* Base media shells for tiles to ensure consistent clipping if page CSS omits it */
.tile__media, .ph {
  border-radius: var(--radius);
  border: 1px solid var(--border);
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .skeleton::after,
  .ph.skeleton::after,
  .tile__media.skeleton::after,
  .firebase-loading::after {
    animation: none !important;
  }
}
